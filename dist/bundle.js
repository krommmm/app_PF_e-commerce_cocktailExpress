(()=>{"use strict";const e=async e=>{try{const t=await fetch(e);return await t.json()}catch(e){console.error(`Il y a eu une erreur : ${e}`)}},t=e=>{let t=[],n=[];if(t=JSON.parse(localStorage.getItem("cocktails")),null!==t)return[...e].forEach((e=>{let a=t.filter((t=>t.nom===e.nom));a&&a.forEach((t=>{n.push({...e,accessoire:t.accessoire,unitée:t.unitée})}))})),n},n=async()=>{let n=JSON.parse(localStorage.getItem("cocktails"));setTimeout((()=>{document.querySelector(".nbArticles").classList.remove("move")}),1e3),document.querySelector(".nbArticles").classList.add("move"),null!==n&&(document.querySelector(".nbArticles").textContent=n.length);let a=await e("https://gobliiins.fr/api/cocktail"),s=t(a),i=0;for(let e=0;e<s.length;e++)i+=parseFloat(s[e].prix)*parseFloat(s[e].unitée);document.querySelector(".prix_total").textContent=i},a=e=>[...e].map((e=>`\n        <article>\n            <div class="image">\n                <img\n                    class="panierPageImg"\n                    src="../assets/images/cocktails/${e.imageUrl}.jpg"\n                    alt="${e.altTxt}"\n                />\n            </div>\n            <div class="texte">\n                <h2>${e.nom}</h2>\n                <p><span class="prix">${e.prix}</span>&nbsp;€</p>\n                <p class="accessoire">${e.accessoire}</p>\n                <label for="nombre" class="quantity">${e.unitée}</label\n                ><input\n                    type="number"\n                    min="1"\n                    max="100"\n                    id="nombre"\n                    class="input_panier"\n                    value="${e.unitée}"\n                    name="nombre"\n                />\n                <div class="btn_container">\n                    <button id="btn_supprimer" class="btn">Supprimer</button>\n                </div>\n            </div>\n        </article> \n`)),s=()=>{(async()=>{let t=await e("https://gobliiins.fr/api/cocktail"),n=t.map((e=>`\n            <article>\n                <a href="./SRC/HTML/focus.html?id=${e.uuid}">\n                    <img src="./SRC/assets/images/cocktails/${e.imageUrl}.jpg" alt="${e.altTxt}" />\n                </a>\n                <h3>${e.nom}</h3>\n                <p>${e.prix} €</p>\n                <a href="./SRC/HTML/focus.html?id=${e.uuid}">\n                    <button class="btn">\n                        <i class="fa-solid fa-cart-shopping"></i>Continuer\n                    </button>\n                </a>\n            </article>\n        `));document.querySelector(".cocktails_container").innerHTML=n})()},i=()=>{let e=(t=window.location.href,new URL(t).searchParams.get("id"));var t;(async()=>{const t=`https://gobliiins.fr/api/cocktail/${e}`;let n=await(async e=>{try{const t=await fetch(e);return await t.json()}catch(e){console.error(`Il y a eu une erreur : ${e}`)}})(t);1!==n.parasols?n.parasols="":n.parasols="parasols",1!==n.sucre_glace?n.sucre_glace="":n.sucre_glace="sucre glace",1!==n.paille?n.paille="":n.paille="paille",n.accessoire=[n.parasols,n.sucre_glace,n.paille];let a=`\n<div class="container">\n<article>\n    <div class="image">\n        <img\n            class="focusImg"\n            src="../assets/images/cocktails/${(s=n).imageUrl}.jpg"\n            alt="${s.altTxt}"\n        />\n    </div>\n    <div class="texte">\n        <h2>${s.nom}</h2>\n        <p><span class="prix">${s.prix}</span>&nbsp;€</p>\n        <p class="description_title">Description :</p>\n        <p class="description_content">${s.description}</p>\n     <div class="thing">   <label>Choisissez un supplément</label>\n    <select name="supplément" id="supplément">\n        <option value="${s.accessoire[0]}">${s.accessoire[0]}</option>\n        <option value="${s.accessoire[1]}">${s.accessoire[1]}</option>\n        <option value="${s.accessoire[2]}">${s.accessoire[2]}</option>\n    </select></div>\n    <div class="thing"><label for="nombre">Choisissez un nombre</label\n    ><input\n        type="number"\n        min="1"\n        max="100"\n        id="nombre"\n        value="1"\n        name="nombre"\n    /></div>\n    </div>\n    \n    <div class="btn_container">\n    <a href="./panier.html" ><button id="btn_focus" class="btn addArticle">Ajouter au panier</button></a>\n    </div>\n</article>\n</div>\n`;var s;document.querySelector(".focus").innerHTML=a})()};n(),(()=>{let e=(new Date).getFullYear();document.querySelector(".year").innerHTML=e})();const c="https://gobliiins.fr/api/cocktail";switch((()=>{const e=window.location.pathname.split("/");return e[e.length-1].replace(".html","")})()){case"index":s();break;case"":s();case"focus":i();break;case"panier":(async()=>{let s=await e("https://gobliiins.fr/api/cocktail"),i=t(s),c=a(i);document.querySelector(".panier_container").innerHTML=c,n()})();break;default:console.error("Page not found")}document.addEventListener("click",(async s=>{let i=s.target;if("btn_focus"===i.getAttribute("id")){let e=(e=>{const t=e.closest(".container"),n=t.querySelector(".texte h2").textContent,a=t.querySelector("select").value,s=t.querySelector("#nombre").value;let i=JSON.parse(localStorage.getItem("cocktails"))||[];const c=i.findIndex((e=>e.nom===n&&e.accessoire===a));return-1!==c?i[c].unitée=parseFloat(i[c].unitée)+parseFloat(s):i.push({nom:n,accessoire:a,unitée:s}),i})(i);localStorage.setItem("cocktails",JSON.stringify(e)),n()}else if("btn_supprimer"===i.getAttribute("id"))(async()=>{let t=await(async e=>{let t=e.parentElement.closest(".texte"),n=t.querySelector("h2").textContent,a=t.querySelector(".accessoire").textContent,s=[...JSON.parse(localStorage.getItem("cocktails"))];return s.forEach(((e,t)=>{e.nom===n&&e.accessoire===a&&s.splice(t,1)})),s})(s.target);localStorage.setItem("cocktails",JSON.stringify(t));let i=((e,t)=>{let n=[...e],a=[...t];return n.forEach((e=>{const t=a.find((t=>t.nom===e.nom));t&&(e.prix=t.prix,e.imageUrl=t.imageUrl)})),n})(t,await e(c)),r=a(i);document.querySelector(".panier_container").innerHTML=r,n()})();else if(i.classList.contains("input_panier")){let i=(e=>{let t=e.target.value,n=e.target.closest("article").querySelector("h2").textContent,a=e.target.closest("article").querySelector(".accessoire").textContent,s=JSON.parse(localStorage.getItem("cocktails"));return s.forEach((e=>{e.nom===n&&e.accessoire===a&&(e.unitée=t)})),s})(s);localStorage.setItem("cocktails",JSON.stringify(i));let r=await e(c),l=t(r),o=a(l);document.querySelector(".panier_container").innerHTML=o,n()}}))})();